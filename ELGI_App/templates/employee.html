{% load static %}
{% include 'general/main.html' %}

<head>


    {% include 'general/title_meta.html' %}
    <!-- plugin css -->
    <link href="{% static 'libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.css' %}" rel="stylesheet"
        type="text/css" />



    <!-- DataTables -->
    <link href="{% static 'libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css' %}" rel="stylesheet"
        type="text/css" />
    <link href="{% static 'libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css' %}" rel="stylesheet"
        type="text/css" />

    <!-- Responsive datatable examples -->
    <link href="{% static 'libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css' %}" rel="stylesheet"
        type="text/css" />
    {% include 'general/head_css.html' %}

</head>
{% include 'general/body.html' %}
<!-- Begin page -->
<div id="layout-wrapper">
    {% include 'general/menu.html' %}

    <!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="main-content">
        <div class="page-content">
            <div class="container-fluid">

                {% include 'general/page_title.html' %}
                <!-- company page start -->
                <div class="row">
                    <div class="col-xl-12">
                        <div class="card">
                            <div class="card-body">
                                <!-- Nav tabs -->
                                <ul class="nav nav-pills nav-justified" role="tablist">
                                    <li class="nav-item waves-effect waves-light border border-dark rounded">
                                        <a class="nav-link active" data-bs-toggle="tab" href="#employesedetails"
                                            role="tab">
                                            <span class="d-block d-sm-none"><i class="fas fa-home"></i></span>
                                            <span class="d-none d-sm-block">Employee Details</span>
                                        </a>
                                    </li>
                                    <li class="nav-item waves-effect waves-light border border-dark rounded">
                                        <a class="nav-link " data-bs-toggle="tab" href="#empskill" role="tab">
                                            <span class="d-block d-sm-none"><i class="far fa-user"></i></span>
                                            <span class="d-none d-sm-block">Employee Skill Assign</span>
                                        </a>
                                    </li>
                                </ul>

                                <!-- Tab panes -->
                                <div class="tab-content p-3 text-muted">
                                    <div class="tab-pane active" id="employesedetails" role="tabpanel">
                                        <!-- form start -->
                                        <form method="post">
                                            {% csrf_token %}
                                            <div class="row">
                                                <!-- left column strat -->
                                                <div class="col-lg-6 ms-lg-auto">
                                                    <div class="mt-4 mt-lg-0">
                                                        <div class="row mb-4">
                                                            <label for="linecode"
                                                                class="col-sm-3 col-form-label">Company Code</label>
                                                            <div class="col-sm-9">
                                                                <select name="line-code" id="linecode"
                                                                    class="form-control">
                                                                    <option value="EL1">EL1</option>
                                                                    <option value="EL2">EL2</option>
                                                                </select>
                                                            </div>
                                                        </div>



                                                        <div class="row mb-4">
                                                            <label for="emp_id"
                                                                class="col-sm-3 col-form-label">Emp ID</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control"
                                                                    id="emp_id" name="emp_id">
                                                            </div>
                                                        </div>

                                                        <div class="row mb-4">
                                                            <label for="emp_name"
                                                                class="col-sm-3 col-form-label">Emp Name</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control"
                                                                    id="emp_name" name="emp_name">
                                                            </div>
                                                        </div>
                                                        <div class="row mb-4">
                                                            <label for="emp_role"
                                                                class="col-sm-3 col-form-label">Emp Role</label>
                                                            <div class="col-sm-9">
                                                                <input list = "role_list" type="text" class="form-control"
                                                                    id="emp_role" name="emp_role">
                                                                <datalist id="role_list">
                                                                    {% for i in group_list %}
                                                                    <option value="{{i}}">
                                                                    {% endfor %}
                                                                </datalist>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- left column end -->
                                                <!-- right column start -->

                                                <div class="col-lg-6 ms-lg-auto">
                                                    <div class="mt-4 mt-lg-0">

                                                        <div class="row mb-4">
                                                            <label class="col-sm-3 col-form-label">Photo Path</label>
                                                            <div class="col-sm-9">
                                                                <div class="input-group">
                                                                    <div class="custom-file">
                                                                        <input type="file" class="custom-file-input"
                                                                            id="inputGroupFile01"
                                                                            aria-describedby="inputGroupFileAddon01"
                                                                            name="photo_path">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row mb-4">
                                                            <label for="name"
                                                                class="col-sm-3 col-form-label">User Name</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control"
                                                                    id="name" name="name">
                                                            </div>
                                                        </div>
                                                        <div class="row mb-4">
                                                            <label for="pwd"
                                                                class="col-sm-3 col-form-label">Password</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control"
                                                                    id="pwd" name="pwd">
                                                            </div>
                                                        </div>
                                                        <div class="row mb-4">
                                                            <label for="emp_dept"
                                                                class="col-sm-3 col-form-label">Emp Dept</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control"
                                                                    id="emp_dept" name="emp_dept">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- right column end-->
                                            </div>


                                            <div class="row justify-content-end">
                                                <div class="col-sm-9">
                                                    <div>
                                                        <button type="submit" class="btn btn-primary w-md"
                                                            id="addbtn" name="submit" value="ED_Add">Add</button>
                                                        <button type="submit" class="btn btn-primary w-md" id="updatebtn"
                                                                name="submit" value= "ED_Modify">Update</button>
                                                        <button type="submit" class="btn btn-primary w-md" id="clearbtn"
                                                            name="submit" onclick="clearInput()">Clear</button>
                                                        <button type="submit" class="btn btn-primary w-md" id="delbtn"
                                                            name="submit" value="ED_Delete">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                        <!-- form end -->
                                        <!-- table start-->
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <table id="datatable"
                                                            class="table table-bordered dt-responsive  nowrap w-100">
                                                            <thead>
                                                                <tr>
                                                                    <th>#</th>
                                                                    <th>Company Code</th>
                                                                    <th>Emp ID</th>
                                                                    <th>Emp Name</th>
                                                                    <th>Role Code</th>
                                                                    <th>Emp Photo Path</th>
                                                                    <th>Username</th>
                                                                    <th>Password</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {% for i in employee_data%}
                                                                <tr>
                                                                    <td>{{forloop.counter}}</td>
                                                                    <td>{{i.Company_Code}}</td>
                                                                    <td>{{i.Emp_ID}}</td>
                                                                    <td>{{i.Emp_Name}}</td>
                                                                    <td>{{i.Role_Code}} </td>
                                                                    <td>{{i.Emp_Photo_Path}}</td>
                                                                    <td>{{i.User_Name}}</td>
                                                                    <td>{{i.Password}}</td>
                                                                    <td>{{i.Password}}</td>
                                                                    <td>{{i.Password}}</td>

                                                                </tr>
                                                                {% endfor %}

                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- end col -->
                                        </div>
                                    </div>

                                    <div class="tab-pane " id="empskill" role="tabpanel">
                                        <!-- form start -->
                                        <form method="post">
                                            {% csrf_token %}
                                            <div class="row">

                                                <!-- left column strat -->
                                                <div class="col-lg-6 ms-lg-auto">
                                                    <div class="mt-4 mt-lg-0">
                                                        <div class="row mb-4">
                                                            <label
                                                                class="col-sm-3 col-form-label">EMP ID</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control"
                                                                    id="empid" name="emp_id1">
                                                            </div>
                                                        </div>

                                                        <div class="row mb-4">
                                                            <label for="sub_station_code"
                                                                class="col-sm-3 col-form-label">Station Name</label>
                                                            <div class="col-sm-9">

                                                                <input list = "station_list" type="text" class="form-control"
                                                                    id="station_required" name="station_name">
                                                                <datalist id="station_list">
                                                                    {% for i in station_list %}
                                                                    <option value="{{i}}">
                                                                    {% endfor %}
                                                                </datalist>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <!-- left column end -->
                                                <!-- right column start -->

                                                <div class="col-lg-6 ms-lg-auto">
                                                    <div class="mt-4 mt-lg-0">

                                                        <div class="row mb-4">
                                                            <label for="sub_station_code"
                                                                class="col-sm-3 col-form-label">Skill Level</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control"
                                                                    id="level_required" name="skill_level">
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <!-- right column end-->


                                            </div>
                                            <div class="row justify-content-end">
                                                <div class="col-sm-9 mb-3">
                                                    <div>
                                                        <button type="submit" class="btn btn-primary w-md" id="addbtn1"
                                                            name="submit" value="ES_Add">Add</button>
                                                        <button type="submit" class="btn btn-primary w-md"
                                                            id="updatebtn1" name="submit"
                                                            value="ES_Modify">Update</button>
                                                        <button type="button" class="btn btn-primary w-md" id="clearbtn1"
                                                            name="submit"  onclick="clearInput()">Clear</button>
                                                        <button type="submit" class="btn btn-primary w-md" id="delbtn1"
                                                            name="submit" value="ES_Delete">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>

                                        <div class="row">
                                            <div class="col-12">
                                                <div class="card">

                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            <table id="datatables"
                                                                class="custom_table table table-bordered nonwrap w-100 ">
                                                                <thead>
                                                                    <tr>
                                                                        <th scope="col">EMP ID</th>
                                                                        <th scope="col">Station Name</th>
                                                                        <th scope="col">Skill Level</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    {% for i in employee_skills %}
                                                                    <tr>
                                                                        <td class="data_pointer">{{i.Emp_ID}}</td>
                                                                        <td class="data_pointer">{{i.Operation_Code}}</td>
                                                                        <td class="data_pointer">{{i.Skill_Level}}
                                                                        </td>
                                                                    </tr>
                                                                    {% endfor %}


                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div><!-- end card-body -->
                        </div><!-- end card -->
                    </div><!-- end col -->
                </div><!-- end row -->
            </div>
            <!--End  container-fluid -->
        </div>
        <!-- End Page-content -->

        {% include 'general/footer.html' %}
    </div>
    <!-- end main content-->
</div>
<!-- END layout-wrapper -->

{% include 'general/right_side_bar.html' %}
{% include 'general/vendor_script.html' %}




<!-- Required datatable js -->
<script src="{%static 'libs/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<script src="{%static 'libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js' %}"></script>

<!-- Buttons examples -->
<script src="{%static 'libs/datatables.net-buttons/js/dataTables.buttons.min.js' %}"></script>
<script src="{%static 'libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js' %}"></script>
<script src="{%static 'libs/jszip/jszip.min.js' %}"></script>
<script src="{%static 'libs/pdfmake/build/pdfmake.min.js' %}"></script>
<script src="{%static 'libs/pdfmake/build/vfs_fonts.js' %}"></script>
<script src="{%static 'libs/datatables.net-buttons/js/buttons.html5.min.js' %}"></script>
<script src="{%static 'libs/datatables.net-buttons/js/buttons.print.min.js' %}"></script>
<script src="{%static 'libs/datatables.net-buttons/js/buttons.colVis.min.js' %}"></script>

<!-- Responsive examples -->
<script src="{%static 'libs/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
<script src="{%static 'libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js' %}"></script>

<!-- Datatable init js -->
<script src="{%static 'js/pages/datatables.init.js' %}"></script>
<script src="{%static 'js/app.js' %}"></script>

<script>
    $(document).ready(function () {
        $('#datatables').DataTable();

    });
</script>
<script>

    $(".row-add").click(function () {
        var $row = $(this).closest("tr");    // Find the row
        var $tds = $row.find("td");

        var txt = '';

        for (let x of $tds) {
            txt += x.textContent + " ";
        }
        console.log(txt)
        var copied = navigator.clipboard.writeText(txt)
        alert("Copied");
    })

</script>


<script>
    var table = document.getElementById('datatables');

    for (var i = 1; i < table.rows.length; i++) {
        table.rows[i].onclick = function () {
            //rIndex = this.rowIndex;
            console.log(table.rows);
            console.log("targeted");
            document.getElementById("empid").value = this.cells[0].innerHTML;
            document.getElementById("station_required").value = this.cells[1].innerHTML;
            document.getElementById("level_required").value = this.cells[2].innerHTML;

            // $('#addbtn1').addClass("disabled");
        };

    }



</script>

<script>
    function clearInput() {
        $("#empid").val(" ")
        $("#station_required").val(" ")
        $("#level_required").val(" ")
    }


</script>

</body>

</html>